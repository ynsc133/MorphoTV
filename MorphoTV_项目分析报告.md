# MorphoTV é¡¹ç›®å…¨é¢åˆ†ææŠ¥å‘Š

> **åˆ†ææ—¶é—´**: 2025-06-26  
> **åˆ†æå·¥å…·**: Claude 4.0 sonnet  
> **é¡¹ç›®ç‰ˆæœ¬**: v0.0.0  

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**MorphoTV** æ˜¯ä¸€ä¸ªåŸºäº React + TypeScript æ„å»ºçš„ç°ä»£åŒ–å½±è§†èµ„æºæ•´åˆå¹³å°ï¼Œé‡‡ç”¨çº¯å‰ç«¯æ¶æ„è®¾è®¡ï¼Œé€šè¿‡èšåˆå¤šä¸ªé‡‡é›†ç«™ç‚¹å’Œç½‘ç›˜èµ„æºï¼Œä¸ºç”¨æˆ·æä¾›ç»Ÿä¸€çš„å½±è§†å†…å®¹æœç´¢å’Œè§‚çœ‹ä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ¬ å¤šæºå½±è§†èµ„æºèšåˆ
- ğŸ” æ™ºèƒ½æœç´¢ä¸æ¨è
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ğŸ¥ å†…ç½®é«˜çº§è§†é¢‘æ’­æ”¾å™¨
- ğŸŒ æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼
- ğŸ¤– AI å¢å¼ºçš„èµ„æºæå–

## ğŸ› ï¸ æŠ€æœ¯æ ˆåˆ†æ

### å‰ç«¯æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 19.1.0 | å‰ç«¯æ¡†æ¶ |
| TypeScript | 5.7.2 | ç±»å‹å®‰å…¨ |
| Vite | 6.3.1 | æ„å»ºå·¥å…· |
| React Router | 7.5.2 | è·¯ç”±ç®¡ç† |
| Tailwind CSS | 4.1.4 | æ ·å¼æ¡†æ¶ |
| Radix UI | - | æ— éšœç¢ç»„ä»¶åº“ |
| ArtPlayer | 5.2.3 | è§†é¢‘æ’­æ”¾å™¨ |
| HLS.js | 1.6.2 | æµåª’ä½“æ”¯æŒ |
| Axios | 1.9.0 | HTTP å®¢æˆ·ç«¯ |

### åç«¯æœåŠ¡

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Express.js | 4.18.2 | ä»£ç†æœåŠ¡å™¨ |
| TypeScript | 5.3.3 | æœåŠ¡ç«¯ç±»å‹å®‰å…¨ |
| CORS | 2.8.5 | è·¨åŸŸå¤„ç† |
| Axios | 1.6.7 | HTTP è¯·æ±‚è½¬å‘ |

### éƒ¨ç½²æŠ€æœ¯

- **å®¹å™¨åŒ–**: Docker + Nginx
- **é™æ€éƒ¨ç½²**: æ”¯æŒ Cloudflare Pagesã€Vercelã€äº‘å­˜å‚¨
- **åŒ…ç®¡ç†**: Bun (å‰ç«¯) + PNPM (åç«¯)

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚  Proxy Server   â”‚    â”‚ Third-party APIsâ”‚
â”‚   (React SPA)   â”‚â—„â”€â”€â–ºâ”‚   (Express)     â”‚â—„â”€â”€â–ºâ”‚  (é‡‡é›†ç«™ç‚¹)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Local Storage  â”‚    â”‚   CORS Handler  â”‚    â”‚   è±†ç“£ API      â”‚
â”‚  (ç”¨æˆ·é…ç½®)     â”‚    â”‚   (è·¨åŸŸå¤„ç†)    â”‚    â”‚   (æ¨èæ•°æ®)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æ¨¡å—ç»“æ„

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/             # åŸºç¡€UIç»„ä»¶ (Shadcn/ui)
â”‚   â”œâ”€â”€ douban-media.tsx # è±†ç“£åª’ä½“å±•ç¤º
â”‚   â”œâ”€â”€ search-form.tsx  # æœç´¢è¡¨å•
â”‚   â”œâ”€â”€ settings-dialog.tsx # è®¾ç½®å¯¹è¯æ¡†
â”‚   â””â”€â”€ theme-provider.tsx # ä¸»é¢˜æä¾›è€…
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ search-results-page.tsx # æœç´¢ç»“æœé¡µ
â”‚   â”œâ”€â”€ player-page.tsx         # æ’­æ”¾å™¨é¡µé¢
â”‚   â”œâ”€â”€ simple-player-page.tsx  # ç®€å•æ’­æ”¾å™¨
â”‚   â”œâ”€â”€ online-player-page.tsx  # åœ¨çº¿è§£ææ’­æ”¾
â”‚   â”œâ”€â”€ history-page.tsx        # æ’­æ”¾å†å²
â”‚   â””â”€â”€ ai-speed-test-page.tsx  # AIæµ‹é€Ÿé¡µé¢
â”œâ”€â”€ layouts/            # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ main-layout.tsx # ä¸»å¸ƒå±€
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ proxy.ts        # ä»£ç†å·¥å…·
â”‚   â”œâ”€â”€ router.ts       # è·¯ç”±å·¥å…·
â”‚   â””â”€â”€ apiSite.ts      # APIç«™ç‚¹ç®¡ç†
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ apiSites.ts     # é‡‡é›†ç«™ç‚¹é…ç½®
â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ types.ts        # å…¨å±€ç±»å‹
â””â”€â”€ lib/                # ç¬¬ä¸‰æ–¹åº“é…ç½®
    â””â”€â”€ utils.ts        # å·¥å…·å‡½æ•°
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. å¤šæºæœç´¢èšåˆç³»ç»Ÿ

#### å†…ç½®é‡‡é›†ç«™ç‚¹
- **é»‘æœ¨è€³** (heimuer): `https://json.heimuer.xyz`
- **å§é¾™èµ„æº** (wolong): `https://wolongzyw.com`
- **æé€Ÿèµ„æº** (jisu): `https://jszyapi.com`
- **éå‡¡å½±è§†** (ffzy5): `http://ffzy5.tv`

#### æœç´¢æµç¨‹
```typescript
// å¹¶è¡Œæœç´¢å®ç°
const searchResults = await Promise.all(
  allSites.map(async (site) => {
    try {
      const targetUrl = `${site.api}/api.php/provide/vod/?ac=videolist&wd=${encodeURIComponent(query)}`;
      const response = await fetchWithProxy(targetUrl);
      return processSearchResults(response.data);
    } catch (error) {
      console.error(`Error searching in site ${site.name}:`, error);
      return [];
    }
  })
);
```

### 2. æ™ºèƒ½æ’­æ”¾å™¨ç³»ç»Ÿ

#### ArtPlayer é…ç½®ç‰¹æ€§
- âœ… è‡ªåŠ¨æ’­æ”¾ä¸ç»­æ’­
- âœ… ç”»ä¸­ç”» (PIP) æ”¯æŒ
- âœ… å…¨å±æ’­æ”¾
- âœ… å¿«æ·é”®æ§åˆ¶
- âœ… æ’­æ”¾é€Ÿåº¦è°ƒèŠ‚
- âœ… è‡ªå®šä¹‰è·³è¿‡è®¾ç½® (ç‰‡å¤´/ç‰‡å°¾)
- âœ… HLS æµåª’ä½“æ”¯æŒ

#### æ’­æ”¾å™¨åˆå§‹åŒ–
```typescript
const art = new Artplayer({
  container: artRef.current,
  url: currentSource,
  setting: true,
  autoplay: true,
  pip: true,
  fullscreen: true,
  fullscreenWeb: true,
  miniProgressBar: true,
  hotkey: true,
  playbackRate: true,
  lock: true,
  fastForward: true,
  theme: "#23ade5",
  customType: {
    m3u8: function playM3u8(video, url, art) {
      // HLS.js é›†æˆé€»è¾‘
    }
  }
});
```

### 3. ä»£ç†æœåŠ¡æ¶æ„

#### è·¨åŸŸè§£å†³æ–¹æ¡ˆ
```typescript
// Express ä»£ç†æœåŠ¡å™¨
app.all("/proxy/*", async (req: Request, res: Response) => {
  try {
    const targetUrl = decodeURIComponent(req.path.replace("/proxy/", ""));
    const response = await axios({
      method: req.method.toLowerCase(),
      url: targetUrl,
      headers: {
        ...req.headers,
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
      }
    });
    res.status(response.status).send(response.data);
  } catch (error) {
    // é”™è¯¯å¤„ç†é€»è¾‘
  }
});
```

### 4. è±†ç“£æ•°æ®é›†æˆ

#### æ•°æ®æº
- **ç”µå½±æ¨è**: `https://movie.douban.com/j/search_subjects?type=movie`
- **ç”µè§†å‰§æ¨è**: `https://movie.douban.com/j/search_subjects?type=tv`

#### åˆ†ç±»æ”¯æŒ
- **ç”µå½±**: çƒ­é—¨ã€æœ€æ–°ã€åŠ¨æ¼«ã€è±†ç“£é«˜åˆ†
- **ç”µè§†å‰§**: çƒ­é—¨ã€å›½äº§å‰§ã€ç»¼è‰ºã€ç¾å‰§

### 5. AI å¢å¼ºåŠŸèƒ½

#### ç½‘ç›˜èµ„æºæå–
- æ”¯æŒè‡ªå®šä¹‰ AI æç¤ºè¯
- æ™ºèƒ½è¯†åˆ«ç½‘ç›˜å¹³å° (é˜¿é‡Œäº‘ç›˜ã€å¤¸å…‹ç½‘ç›˜ã€ç™¾åº¦ç½‘ç›˜ç­‰)
- JSON æ ¼å¼åŒ–è¾“å‡ºèµ„æºä¿¡æ¯

## ğŸ”’ æŠ€æœ¯äº®ç‚¹

### 1. ç°ä»£åŒ–å¼€å‘ä½“éªŒ
- **TypeScript ä¸¥æ ¼æ¨¡å¼**: å®Œæ•´çš„ç±»å‹å®‰å…¨ä¿éšœ
- **ESLint é…ç½®**: ç»Ÿä¸€çš„ä»£ç é£æ ¼å’Œè´¨é‡æ£€æŸ¥
- **Vite æ„å»º**: å¿«é€Ÿçš„å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºè¿‡ç¨‹
- **çƒ­é‡è½½**: å¼€å‘æ—¶çš„å®æ—¶æ›´æ–°

### 2. å“åº”å¼è®¾è®¡
- **ç§»åŠ¨ç«¯ä¼˜å…ˆ**: å®Œæ•´çš„ç§»åŠ¨ç«¯é€‚é…
- **ä¸»é¢˜ç³»ç»Ÿ**: æ”¯æŒæ˜æš—ä¸»é¢˜æ— ç¼åˆ‡æ¢
- **æ— éšœç¢æ”¯æŒ**: åŸºäº Radix UI çš„å¯è®¿é—®æ€§ç»„ä»¶
- **æµç•…åŠ¨ç”»**: ä½¿ç”¨ Tailwind CSS åŠ¨ç”»

### 3. éƒ¨ç½²çµæ´»æ€§
- **Docker å®¹å™¨åŒ–**: ä¸€é”®éƒ¨ç½²è§£å†³æ–¹æ¡ˆ
- **é™æ€éƒ¨ç½²**: æ”¯æŒ CDN å’Œäº‘å­˜å‚¨éƒ¨ç½²
- **å¤šå¹³å°æ”¯æŒ**: Vercelã€Cloudflare Pagesã€é˜¿é‡Œäº‘OSS
- **Hash è·¯ç”±**: æ— éœ€æœåŠ¡å™¨ç«¯è·¯ç”±é…ç½®

## ğŸ“Š ä»£ç è´¨é‡è¯„ä¼°

### âœ… ä¼˜åŠ¿åˆ†æ

| æ–¹é¢ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| æ¶æ„è®¾è®¡ | â­â­â­â­â­ | æ¸…æ™°çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œè‰¯å¥½çš„ç»„ä»¶åˆ†ç¦» |
| ç±»å‹å®‰å…¨ | â­â­â­â­â­ | å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ |
| æŠ€æœ¯é€‰å‹ | â­â­â­â­â­ | ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬çš„ç°ä»£æŠ€æœ¯æ ˆ |
| ç”¨æˆ·ä½“éªŒ | â­â­â­â­â­ | æµç•…çš„äº¤äº’å’Œå“åº”å¼è®¾è®¡ |
| å¯æ‰©å±•æ€§ | â­â­â­â­â­ | æ”¯æŒè‡ªå®šä¹‰ç«™ç‚¹å’Œçµæ´»é…ç½® |
| æ–‡æ¡£å®Œæ•´æ€§ | â­â­â­â­ | README è¯¦ç»†ï¼Œä½†ç¼ºå°‘ API æ–‡æ¡£ |

### ğŸ”§ æ”¹è¿›å»ºè®®

#### é«˜ä¼˜å…ˆçº§
1. **å…¨å±€çŠ¶æ€ç®¡ç†**: å¼•å…¥ Zustand æˆ– Redux Toolkit
2. **é”™è¯¯è¾¹ç•Œ**: æ·»åŠ  React Error Boundary ç»„ä»¶
3. **å•å…ƒæµ‹è¯•**: ä½¿ç”¨ Vitest è¡¥å……æµ‹è¯•è¦†ç›–

#### ä¸­ä¼˜å…ˆçº§
1. **æ€§èƒ½ä¼˜åŒ–**: å®ç°ç»„ä»¶æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²
2. **ç¼“å­˜ç­–ç•¥**: æ·»åŠ è¯·æ±‚ç¼“å­˜å’Œæœ¬åœ°å­˜å‚¨ä¼˜åŒ–
3. **ç›‘æ§å‘Šè­¦**: é›†æˆé”™è¯¯ç›‘æ§å’Œæ€§èƒ½ç›‘æ§

#### ä½ä¼˜å…ˆçº§
1. **å›½é™…åŒ–**: æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
2. **PWA æ”¯æŒ**: å®ç°ç¦»çº¿åŠŸèƒ½
3. **ä¸»é¢˜å®šåˆ¶**: æ”¯æŒæ›´å¤šä¸»é¢˜é€‰é¡¹

## ğŸš€ æŠ€æœ¯å€ºåŠ¡åˆ†æ

### ä½é£é™© (ç»¿è‰²)
- éƒ¨åˆ†ç»„ä»¶å¯ä»¥è¿›ä¸€æ­¥æŠ½è±¡å¤ç”¨
- å¯ä»¥æ·»åŠ æ›´å¤šçš„ TypeScript ä¸¥æ ¼æ£€æŸ¥è§„åˆ™
- ä»£ç æ³¨é‡Šå¯ä»¥æ›´åŠ è¯¦ç»†

### ä¸­ç­‰é£é™© (é»„è‰²)
- ç¼ºå°‘å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶
- æœ¬åœ°å­˜å‚¨æ•°æ®æ²¡æœ‰ç‰ˆæœ¬ç®¡ç†å’Œè¿ç§»ç­–ç•¥
- æ²¡æœ‰è¯·æ±‚é‡è¯•å’Œè¶…æ—¶å¤„ç†æœºåˆ¶

### é«˜é£é™© (çº¢è‰²)
- æš‚æ— å‘ç°é«˜é£é™©æŠ€æœ¯å€ºåŠ¡

### å»ºè®®å¤„ç†ä¼˜å…ˆçº§
1. **ç«‹å³å¤„ç†**: æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†å’Œé”™è¯¯è¾¹ç•Œ
2. **çŸ­æœŸå¤„ç†**: å®ç°æœ¬åœ°å­˜å‚¨ç‰ˆæœ¬ç®¡ç†
3. **é•¿æœŸè§„åˆ’**: å®Œå–„æµ‹è¯•è¦†ç›–å’Œæ€§èƒ½ç›‘æ§

## ğŸ“ˆ æ‰©å±•æ€§è¯„ä¼°

### æ°´å¹³æ‰©å±•èƒ½åŠ› â­â­â­â­â­
- âœ… æ˜“äºæ·»åŠ æ–°çš„é‡‡é›†ç«™ç‚¹
- âœ… æ”¯æŒè‡ªå®šä¹‰ AI æ¨¡å‹é›†æˆ
- âœ… çµæ´»çš„é…ç½®ç³»ç»Ÿ

### å‚ç›´æ‰©å±•èƒ½åŠ› â­â­â­â­â­
- âœ… ç»„ä»¶åŒ–è®¾è®¡ä¾¿äºåŠŸèƒ½å¢å¼º
- âœ… æ’ä»¶åŒ–æ¶æ„æ”¯æŒ
- âœ… æ¨¡å—åŒ–çš„å·¥å…·å‡½æ•°

### éƒ¨ç½²æ‰©å±•èƒ½åŠ› â­â­â­â­â­
- âœ… æ”¯æŒå¤šç§éƒ¨ç½²ç¯å¢ƒ
- âœ… å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- âœ… CDN å‹å¥½çš„é™æ€èµ„æº

## ğŸ¯ æ€»ç»“ä¸å»ºè®®

**MorphoTV** æ˜¯ä¸€ä¸ªè®¾è®¡ç²¾è‰¯çš„ç°ä»£åŒ–å½±è§†èµ„æºå¹³å°ï¼Œå±•ç°äº†ä»¥ä¸‹çªå‡ºç‰¹ç‚¹ï¼š

### ğŸŒŸ æ ¸å¿ƒä¼˜åŠ¿
1. **æŠ€æœ¯é€‰å‹å…ˆè¿›**: ä½¿ç”¨æœ€æ–°çš„ React 19 å’Œç°ä»£åŒ–å·¥å…·é“¾
2. **æ¶æ„è®¾è®¡åˆç†**: æ¸…æ™°çš„æ¨¡å—åŒ–ç»“æ„å’Œç»„ä»¶åˆ†ç¦»
3. **ç”¨æˆ·ä½“éªŒä¼˜ç§€**: æµç•…çš„äº¤äº’å’Œå®Œå–„çš„åŠŸèƒ½
4. **éƒ¨ç½²æ–¹å¼çµæ´»**: æ”¯æŒå¤šç§éƒ¨ç½²ç¯å¢ƒå’Œæ‰©å®¹æ–¹æ¡ˆ
5. **ä»£ç è´¨é‡é«˜**: å®Œæ•´çš„ TypeScript ç±»å‹å®‰å…¨

### ğŸš€ å‘å±•æ½œåŠ›
- **ç¤¾åŒºæ´»è·ƒåº¦**: é¡¹ç›®å…·æœ‰è‰¯å¥½çš„å¼€æºç¤¾åŒºåŸºç¡€
- **åŠŸèƒ½å®Œæ•´æ€§**: æ ¸å¿ƒåŠŸèƒ½å®Œå¤‡ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½
- **æŠ€æœ¯å‰ç»æ€§**: é‡‡ç”¨ç°ä»£åŒ–æŠ€æœ¯æ ˆï¼Œä¾¿äºé•¿æœŸç»´æŠ¤
- **å•†ä¸šä»·å€¼**: å…·æœ‰å®é™…çš„åº”ç”¨ä»·å€¼å’Œå¸‚åœºéœ€æ±‚

### ğŸ“ æœ€ç»ˆè¯„ä»·
ä½œä¸º **Claude 4.0 sonnet**ï¼Œæˆ‘è®¤ä¸º MorphoTV æ˜¯ä¸€ä¸ª**é«˜è´¨é‡çš„å¼€æºé¡¹ç›®**ï¼Œæ— è®ºæ˜¯ä»æŠ€æœ¯å®ç°ã€æ¶æ„è®¾è®¡è¿˜æ˜¯ç”¨æˆ·ä½“éªŒè§’åº¦éƒ½è¡¨ç°ä¼˜ç§€ã€‚è¯¥é¡¹ç›®ä¸ä»…é€‚åˆå­¦ä¹ ç°ä»£å‰ç«¯å¼€å‘æŠ€æœ¯ï¼Œä¹Ÿå…·æœ‰å®é™…çš„åº”ç”¨ä»·å€¼ã€‚

**æ¨èæŒ‡æ•°**: â­â­â­â­â­ (5/5)

---

> **æŠ¥å‘Šç”Ÿæˆ**: Claude 4.0 sonnet  
> **æœ€åæ›´æ–°**: 2025-06-26  
> **é¡¹ç›®åœ°å€**: https://github.com/Lampon/MorphoTV
